import 'package:flutter/material.dart';
import 'package:untitled3/decorations/star_painter.dart';

class RocketDetails extends StatelessWidget {
  final Map<String, dynamic> rocket;
  const RocketDetails({super.key, required this.rocket});

  @override
  Widget build(BuildContext context) {
    var imageUrl = (rocket['flickr_images'] != null && rocket['flickr_images'].isNotEmpty)
        ? rocket['flickr_images'][0]
        : null;
    var name = rocket['name']?.toString() ?? 'Rocket';
    var height = rocket['height']?['meters']?.toString() ?? 'N/A';
    var mass = rocket['mass']?['kg']?.toString() ?? 'N/A';
    var firstFlight = rocket['first_flight'] ?? 'N/A';

    return Scaffold(
      appBar: AppBar(
        automaticallyImplyLeading: true,
        backgroundColor: Colors.black,
        centerTitle: true,
        title: Text(name, style: TextStyle(color: Colors.white)),
        iconTheme: IconThemeData(color: Colors.white),
      ),
      backgroundColor: Colors.black,
      body: Stack(
        children: [
          Positioned.fill(
            child: CustomPaint(
              painter: StarPainter(
                numberOfStars: 200,
                starColor: Colors.grey[600]!,
              ),
            ),
          ),
          SingleChildScrollView(
            child: Container(
              color: Colors.transparent,
              child: Padding(
                padding: EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    SizedBox(height: 70),
                    ClipRRect(
                      borderRadius: BorderRadius.circular(16),
                      child: imageUrl != null
                          ? Image.network(
                        imageUrl,
                        height: 250,
                        width: double.infinity,
                        fit: BoxFit.cover,
                        errorBuilder: (context, error, stackTrace) =>
                            Icon(Icons.image_not_supported,
                                size: 100, color: Colors.white),
                      )
                          : Icon(Icons.rocket, size: 100, color: Colors.grey),
                    ),
                    SizedBox(height: 70),
                    Container(
                      decoration: BoxDecoration(
                        color: Colors.grey[900],
                        borderRadius: BorderRadius.circular(16),
                      ),
                      padding: EdgeInsets.all(16),
                      child: Table(
                        defaultVerticalAlignment:
                        TableCellVerticalAlignment.middle,
                        columnWidths: {
                          0: FlexColumnWidth(4),
                          1: FlexColumnWidth(3)
                        },
                        children: [
                          tableRow('Height (m)', height),
                          tableRow('Mass (kg)', mass),
                          tableRow('First Flight', firstFlight),
                        ],
                      ),
                    ),
                    SizedBox(height: 24),
                  ],
                ),
              ),
            ),
          ),
        ],
      ),
    );
  }

  TableRow tableRow(String title, String value) {
    return TableRow(
      children: [
        Padding(
          padding: EdgeInsets.symmetric(vertical: 12),
          child: Text(
            title,
            style: TextStyle(
                color: Colors.white70,
                fontSize: 16,
                fontWeight: FontWeight.bold),
          ),
        ),
        Padding(
          padding: EdgeInsets.symmetric(vertical: 12),
          child: Text(
            value,
            style: TextStyle(color: Colors.white, fontSize: 15),
          ),
        ),
      ],
    );
  }
}
